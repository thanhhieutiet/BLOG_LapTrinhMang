<svg viewBox="0 0 1200 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <defs>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f0f4f8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d9e2ec;stop-opacity:1" />
    </linearGradient>
    
    <filter id="shadow">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
    
    <linearGradient id="boxGrad1" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4299e1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3182ce;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="boxGrad2" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#48bb78;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#38a169;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="boxGrad3" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ed8936;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#dd6b20;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="boxGrad4" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9f7aea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#805ad5;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <rect width="1200" height="600" fill="url(#bgGrad)"/>
  
  <!-- Title -->
  <text x="600" y="50" font-family="Arial, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#2d3748">
    PIPELINE XỬ LÝ APK - ANDROID MALWARE DETECTION
  </text>
  
  <!-- Step 1: Download -->
  <g filter="url(#shadow)">
    <rect x="50" y="120" width="220" height="320" rx="10" fill="url(#boxGrad1)"/>
    <circle cx="160" cy="170" r="30" fill="white" opacity="0.9"/>
    <path d="M 160 155 L 160 185 M 150 175 L 160 185 L 170 175" stroke="#3182ce" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    
    <text x="160" y="225" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="white">
      1. DOWNLOAD
    </text>
    
    <text x="160" y="260" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • VirusTotal API
    </text>
    <text x="160" y="285" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • AndroZoo
    </text>
    <text x="160" y="310" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • Drebin Dataset
    </text>
    <text x="160" y="335" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • MH-100K
    </text>
    
    <rect x="70" y="365" width="180" height="55" rx="5" fill="white" opacity="0.2"/>
    <text x="160" y="385" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white" font-weight="bold">
      Output:
    </text>
    <text x="160" y="405" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      APK Files
    </text>
  </g>
  
  <!-- Arrow 1 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4a5568" />
    </marker>
  </defs>
  <line x1="270" y1="280" x2="340" y2="280" stroke="#4a5568" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- Step 2: Extract -->
  <g filter="url(#shadow)">
    <rect x="340" y="120" width="220" height="320" rx="10" fill="url(#boxGrad2)"/>
    <circle cx="450" cy="170" r="30" fill="white" opacity="0.9"/>
    <rect x="435" y="160" width="30" height="25" rx="2" fill="none" stroke="#38a169" stroke-width="3"/>
    <path d="M 445 155 L 445 165 M 455 155 L 455 165" stroke="#38a169" stroke-width="2"/>
    
    <text x="450" y="225" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="white">
      2. EXTRACT
    </text>
    
    <text x="450" y="260" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • Giải nén APK
    </text>
    <text x="450" y="285" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • Trích xuất DEX
    </text>
    <text x="450" y="310" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • AndroidManifest.xml
    </text>
    <text x="450" y="335" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • Resources
    </text>
    
    <rect x="360" y="365" width="180" height="55" rx="5" fill="white" opacity="0.2"/>
    <text x="450" y="385" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white" font-weight="bold">
      Output:
    </text>
    <text x="450" y="405" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      DEX, Manifest, Assets
    </text>
  </g>
  
  <!-- Arrow 2 -->
  <line x1="560" y1="280" x2="630" y2="280" stroke="#4a5568" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- Step 3: Parse -->
  <g filter="url(#shadow)">
    <rect x="630" y="120" width="220" height="320" rx="10" fill="url(#boxGrad3)"/>
    <circle cx="740" cy="170" r="30" fill="white" opacity="0.9"/>
    <circle cx="740" cy="170" r="20" fill="none" stroke="#dd6b20" stroke-width="3"/>
    <path d="M 730 170 L 740 180 L 755 160" stroke="#dd6b20" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    
    <text x="740" y="225" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="white">
      3. PARSE
    </text>
    
    <text x="740" y="260" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • Androguard
    </text>
    <text x="740" y="285" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • Phân tích bytecode
    </text>
    <text x="740" y="310" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • API calls
    </text>
    <text x="740" y="335" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • Permissions
    </text>
    
    <rect x="650" y="365" width="180" height="55" rx="5" fill="white" opacity="0.2"/>
    <text x="740" y="385" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white" font-weight="bold">
      Output:
    </text>
    <text x="740" y="405" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      Parsed Data Objects
    </text>
  </g>
  
  <!-- Arrow 3 -->
  <line x1="850" y1="280" x2="920" y2="280" stroke="#4a5568" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- Step 4: Feature Export -->
  <g filter="url(#shadow)">
    <rect x="920" y="120" width="220" height="320" rx="10" fill="url(#boxGrad4)"/>
    <circle cx="1030" cy="170" r="30" fill="white" opacity="0.9"/>
    <rect x="1015" y="160" width="30" height="20" rx="2" fill="none" stroke="#805ad5" stroke-width="2"/>
    <line x1="1020" y1="165" x2="1040" y2="165" stroke="#805ad5" stroke-width="2"/>
    <line x1="1020" y1="170" x2="1035" y2="170" stroke="#805ad5" stroke-width="2"/>
    <line x1="1020" y1="175" x2="1040" y2="175" stroke="#805ad5" stroke-width="2"/>
    
    <text x="1030" y="225" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="white">
      4. FEATURE EXPORT
    </text>
    
    <text x="1030" y="260" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • Permissions vector
    </text>
    <text x="1030" y="285" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • API calls sequence
    </text>
    <text x="1030" y="310" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • String patterns
    </text>
    <text x="1030" y="335" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white">
      • CSV/JSON export
    </text>
    
    <rect x="940" y="365" width="180" height="55" rx="5" fill="white" opacity="0.2"/>
    <text x="1030" y="385" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white" font-weight="bold">
      Output:
    </text>
    <text x="1030" y="405" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      Feature Vectors Dataset
    </text>
  </g>
  
  <!-- Bottom flow indicator -->
  <g>
    <rect x="50" y="480" width="1090" height="80" rx="10" fill="#2d3748" opacity="0.1"/>
    <text x="600" y="510" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2d3748">
      → Input cho Transformer Model →
    </text>
    <text x="600" y="540" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#4a5568">
      Dataset sẵn sàng cho huấn luyện mô hình phân loại malware
    </text>
  </g>
</svg>